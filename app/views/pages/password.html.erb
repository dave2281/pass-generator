<%= form_with url: root_path, method: :get, remote: true, data: { turbo: true } do %>
  <div class="w-full flex justify-center pt-12">
    <h1 class="md:text-6xl text-3xl mb-4 font-bold text-white tracking-tight leading-tight text-center">
      Password <span class="border-b-4 border-green-400"></span> Generator.
    </h1>
  </div>

  <div class="flex-grow flex flex-col items-center justify-center w-full">
    <%= turbo_frame_tag "password_form" do %>
      <div class="relative">
        <% @pass_length = @password.length %>
        <%= text_area_tag :password, @password, id: 'passwordField', class: 'form-input w-full text-lg resize-none', placeholder: 'Your password', rows: 6 %>
        <button type="button" onclick="copyPassword()" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded">
          Скопировать
        </button>
      </div>

      <script>
        function copyPassword() {
          const passwordField = document.getElementById("passwordField");

          passwordField.select();
          passwordField.setSelectionRange(0, 99999);

          document.execCommand("copy");

          alert("Пароль скопирован в буфер обмена!");
        }
      </script>

    <% end %>
    <br>
    <br>
    <div class="mt-4">
      <label class="text-white mr-4">
        <p class="text-center"><%= @bits %></p>
        <p class="text-center">Длина пароля: <span id="length-display"><%= @pass_length %></span></p>
        <%= range_field_tag :length, @pass_length, min: 5, max: 128, oninput: "document.getElementById('length-display').innerText = this.value", 
                                                           class: 'w-full h-2 bg-green-400 rounded-lg appearance-none cursor-pointer range-slider' %>
      </label>
    </div>

    <div class="mt-4">
      <label class="text-white mr-4">
        <%= check_box_tag :include_symbols, '1', true %>
        <label>Использовать символы (!, @, # и т.д.)</label>
      </label>
    </div>

    <div class="mt-4">
      <label class="text-white mr-4">
        <%= check_box_tag :include_numbers, '1', true %>
        <label>Использовать цифры (0-9)</label>
      </label>
    </div>

    <div class="mt-4" >
      <%= submit_tag 'Сгенерировать пароль', class: 'mt-4 px-6 py-2 bg-green-500 text-white rounded' %>
    </div>
  </div>
<% end %>
