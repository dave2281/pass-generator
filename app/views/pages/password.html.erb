<%= form_with url: root_path, method: :get, remote: true, data: { turbo: true } do %>
  <div class="w-full flex justify-center pt-12">
    <h1 class="md:text-6xl text-3xl mb-4 font-bold text-white tracking-tight leading-tight text-center">
      Password Generator.
    </h1>
  </div>

  <div class="flex-grow flex flex-col items-center justify-center w-full">
    <%= turbo_frame_tag "password_form" do %>
      <div class="relative w-full">
        <% @pass_length = @password.length %>
        
        <%= text_area_tag :password, @password, id: 'passwordField', class: 'form-input w-full text-lg resize-none p-4 border-2 border-gray-300 rounded-lg focus:ring-4 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400 mb-4', placeholder: 'Your password', rows: 6 %>
        
        <button type="button" onclick="copyPassword()" class="w-full px-6 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300">
          Скопировать
        </button>

      </div>

      <script>
        function copyPassword() {
          const passwordField = document.getElementById("passwordField");

          passwordField.select();
          passwordField.setSelectionRange(0, 99999);

          document.execCommand("copy");

          alert("Пароль скопирован в буфер обмена!");
        }
      </script>

    <% end %>

    <div class="mt-8 w-full">
      <label class="text-white block text-lg font-semibold">
        <% if @bits %>
          <p class="text-center text-sm mb-2 text-gray-300">Качество: <%= @bits[:entropy] %> bits</p>
          <p class="text-center text-sm mb-2 text-gray-300">Алфавит: <%= @bits[:alphabet_size] %> </p>
        <% end %>
        <p class="text-center text-sm mb-4 text-gray-200">Длина пароля: <span id="length-display" class="font-bold text-xl"><%= @pass_length %></span></p>
        <input type="range" id="length" name="length" min="5" max="128" value="<%= @pass_length %>"
               oninput="document.getElementById('length-display').innerText = this.value"
               class="w-full h-2 bg-green-500 rounded-lg appearance-none cursor-pointer transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 focus:ring-green-300">
      </label>
    </div>

    <div class="mt-8 w-full space-y-4">
      <label class="text-white flex items-center text-lg">
        <%= check_box_tag :include_symbols, '1', true, class: 'mr-3 rounded-lg border-2 border-gray-300 text-green-500 focus:ring-2 focus:ring-green-500 transition-all duration-200' %>
        <span class="text-lg">Использовать символы (!, @, # и т.д.)</span>
      </label>

      <label class="text-white flex items-center text-lg">
        <%= check_box_tag :include_uppercase, '1', true, class: 'mr-3 rounded-lg border-2 border-gray-300 text-green-500 focus:ring-2 focus:ring-green-500 transition-all duration-200' %>
        <span class="text-lg">Использовать верхний регистр букв</span>
      </label>

      <label class="text-white flex items-center text-lg">
        <%= check_box_tag :include_numbers, '1', true, class: 'mr-3 rounded-lg border-2 border-gray-300 text-green-500 focus:ring-2 focus:ring-green-500 transition-all duration-200' %>
        <span class="text-lg">Использовать цифры (0-9)</span>
      </label>
    </div>

    <div class="mt-8">
      <%= submit_tag 'Сгенерировать пароль', class: 'mt-4 px-8 py-3 bg-green-600 text-white rounded-lg shadow-lg hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-green-500 transition-all duration-300 ease-in-out' %>
    </div>  

  </div>
<% end %>
